<!DOCTYPE html><html lang="en" class="AUI.$"><head><meta charset="UTF-8"><meta content="minimum-scale=1.0, width=device-width" name="viewport"><meta name="description" content=""><link rel="icon" type="image/png" href="favicon-32x32.png" sizes="16x16 32x32" /><title>AUI.$ - Clay</title><!-- inject:css --><link rel="stylesheet" href="/vendor/senna/senna.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/dracula.css"><!-- endinject --><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,900" rel="stylesheet"><script src="/scripts/jquery.min.js"></script><script src="/scripts/popper.js"></script><!-- inject:js --><script src="/js/bundles/shared.electric.js"></script><script src="/vendor/bootstrap.js"></script><script src="/vendor/svg4everybody.js"></script><script src="/vendor/senna/senna.js"></script><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/htmlmixed/htmlmixed.js"></script><script src="/vendor/codemirror/mode/soy/soy.js"></script><script src="/vendor/codemirror/mode/xml/xml.js"></script><!-- endinject --><script>svg4everybody();</script><link id="mainCssLink" rel="stylesheet" href="/styles/main.css"></head><body data-senna><div data-senna-surface id="wrapper"><div class="senna-loading-bar"></div><!-- inject:metal:js --><div id="pageComponent"><div class="docs"><main class="content"><div><div class="navbar navbar-mobile navbar-expand-lg navbar-header"><a class="navbar-brand d-flex" href="/"><span class="title h1 font-weight-bold mb-0 p-1">Clay </span></a><button class="navbar-toggler sidebar-toggler p-3" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><svg aria-hidden="true" class="lexicon-icon lexicon-icon-bars"><use xlink:href="/vendor/lexicon/icons.svg#bars" /></svg></button></div><nav class="sidebar-toggler-content sidenav-fixed sidenav-menu-slider" id="clay-sidebar"><div class="sidebar sidebar-clay-site sidenav-menu d-flex flex-column"><div class="sidebar-header"><div class="navbar navbar-expand-lg navbar-header"><a class="navbar-brand" href="/"><span class="title">Clay </span><small>Portal Migration</small></a></div></div><div class="sidebar-body mb-auto"><div class="sidebar-search"><div class="page-autocomplete"><div class="form-group"><div class="input-group"><input autocomplete="off" class="form-control" name="q" placeholder="Search" ref="input" required type="text" ><span class="input-group-addon"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#search" /></svg></span></div></div></div></div><ul class="nav nav-nested nav-pills nav-stacked"><li class="active nav-heading"><a class="align-middle" href="/others/"><svg class="clay-icon icon-monospaced mr-2"><use xlink:href="/vendor/lexicon/icons.svg#code" /></svg><span>Others</span><svg class="collapse-toggle clay-icon icon-monospaced" data-onclick="handleCollapseClick_" ><use xlink:href="/vendor/lexicon/icons.svg#caret-bottom" /></svg></a><ul class="nav nav-nested nav-pills nav-stacked"><li class="active "><a class="align-middle" href="/others/aui$.html"><span>AUI.$</span></a></li><li class=""><a class="align-middle" href="/others/lodash.html"><span>Lodash</span></a></li></ul></li><li class="nav-heading"><a class="align-middle" href="/styles/"><svg class="clay-icon icon-monospaced mr-2"><use xlink:href="/vendor/lexicon/icons.svg#magic" /></svg><span>Styles</span><svg class="collapse-toggle clay-icon icon-monospaced" data-onclick="handleCollapseClick_" ><use xlink:href="/vendor/lexicon/icons.svg#caret-bottom" /></svg></a><ul class="nav nav-nested nav-pills nav-stacked"><li class=""><a class="align-middle" href="/styles/style1.html"><span>Style Title</span></a></li></ul></li><li class="nav-heading"><a class="align-middle" href="/taglibs/"><svg class="clay-icon icon-monospaced mr-2"><use xlink:href="/vendor/lexicon/icons.svg#code" /></svg><span>Taglibs</span><svg class="collapse-toggle clay-icon icon-monospaced" data-onclick="handleCollapseClick_" ><use xlink:href="/vendor/lexicon/icons.svg#caret-bottom" /></svg></a><ul class="nav nav-nested nav-pills nav-stacked"><li class=""><a class="align-middle" href="/taglibs/liferay-aui:icon.html"><span>liferay-aui:icon</span></a></li><li class=""><a class="align-middle" href="/taglibs/liferay-ui:alert.html"><span>liferay-ui:alert</span></a></li><li class=""><a class="align-middle" href="/taglibs/liferay-ui:error.html"><span>liferay-ui:error</span></a></li><li class=""><a class="align-middle" href="/taglibs/liferay-ui:success.html"><span>liferay-ui:success</span></a></li></ul></li></ul></div></div></nav></div><div class="sidebar-offset"><header class="text-center"><div class="container-fluid"><h1 class="py-3">AUI.$ <small>Migration Guide</small></h1></div></header><div class="clay-site-container container-fluid"><div class="row"><div class="col-12 text-center"><code>AUI.$</code>to<code>document.querySelector</code></div><div class="col-12"><article class="my-5"><h2>Problems and notes:</h2><ul><li>AUI.$ returns a jQuery nodeList with many methods available. Replacing it with <code>document.querySelector</code> or <code>document.querySelectorAll</code> we lose all that methods.</li></ul></article><article class="my-5"><h2>How to migrate:</h2><ul><li><p>Replace <code>AUI.$(selector)</code> with <code>document.querySelector(selector)</code> if expected result is one node.</p></li><li><p>Replace <code>AUI.$(selector)</code> with <code>document.querySelectorAll(selector)</code> if expected result is more than one node. In this case you will have to iterate over the array to execute methods on each node if needed.</p></li><li><p>Migrate methods:</p><ul><li><p>Note: Some methods can't be directly replaced with native implementations so we may need to use some utilities from metal like <code>metal-dom</code>. To do it we need to import the module in the jsp in the following way:</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text" ref="code">&lt;aui:script require=&quot;metal-dom/src/dom&quot;&gt;
  let dom = metalDomSrcDom.default;
  ...
&lt;/aui:script&gt;</code></pre></div><p>or</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text" ref="code">&lt;aui:script require=&quot;metal-dom/src/domData&quot;&gt;
  let domData = metalDomSrcDomData.default;
  ...
&lt;/aui:script&gt;</code></pre></div></li><li><p>Replace <code>.addClass()</code> with <code>dom.addClasses(element, classes)</code>.</p></li><li><p>Replace <code>.ajaxSubmit()</code> with</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text" ref="code">fetch(url, {
  body: new FormData(form),
  credentials: &#39;include&#39;,
  method: &#39;POST&#39;,
  ...
})
.then(response =&gt; ...);</code></pre></div></li><li><p>Replace <code>.append()</code> with <code>dom.append(parent, child)</code>.</p></li><li><p>Replace <code>.attr(attribute)</code> with <code>.getAttribute(attribute)</code>.</p></li><li><p>Replace <code>.attr(attribute, value)</code> with <code>.setAttribute(attribute, value)</code>.</p></li><li><p>Replace <code>.closest()</code> TODO.</p></li><li><p>Replace <code>.collapse()</code> TODO.</p></li><li><p>Replace <code>.data()</code> with <code>domData.get(element, 'propertyName')</code>.</p></li><li><p>Replace <code>.data(value)</code> with <code>domData.set(element, 'propertyName', value)</code>.</p></li><li><p>Replace <code>.each()</code> with <code>.forEach</code>.</p></li><li><p>Replace <code>.find()</code> with <code>.querySelector()</code> or <code>querySelectorAll()</code>.</p></li><li><p>Replace <code>.formToArray()</code> TODO</p></li><li><p>Replace <code>.html()</code> with <code>.innerHTML</code>.</p></li><li><p>Replace <code>.html(value)</code> with <code>.innerHTML = value</code>.</p></li><li><p>Replace <code>.load()</code> with</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text" ref="code">fetch(url, data)
.then(response =&gt; {
  element.innerHTML = response;
});</code></pre></div></li><li><p>Replace <code>.map()</code> with <code>[...document.querySelectorAll(selector)].map()</code></p></li><li><p>Replace <code>.on()</code> with <code>addEventListener()</code>.</p></li><li><p>Replace <code>.one()</code> with <code>dom.once(element, eventName, fn)</code>.</p></li><li><p>Replace <code>.prepend()</code> TODO.</p></li><li><p>Replace <code>.prop('property')</code> with <code>element.property</code>.</p></li><li><p>Replace <code>.prop('property', value)</code> with <code>element.property = value</code>.</p></li><li><p>Replace <code>.ready(fn)</code> with <code>document.addEventListener('DOMContentLoaded', fn, false)</code> or <code>window.addEventListener('load', fn, false)</code></p></li><li><p>Replace <code>.remove()</code> with <code>dom.exitDocument(element)</code>.</p></li><li><p>Replace <code>.serializeArray()</code> with</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text" ref="code">  form
  dom.exitDocument(element)</code></pre></div></li><li><p>Replace <code>.sideNavigation()</code> TODO.</p></li><li><p>Replace <code>.toggle()</code> with</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text" ref="code">if (element.style.display === &#39;none&#39;)
  element.style.display = &#39;block&#39;;
else
  element.style.display = &#39;none&#39;;</code></pre></div></li><li><p>Replace <code>toggleClass('class')</code> with <code>dom.toggleClasses(element, 'class')</code>.</p></li><li><p>Replace <code>.tooltip()</code> TODO.</p></li><li><p>Replace <code>.val()</code> with <code>.value</code>.</p></li><li><p>Replace <code>.val(newValue)</code> with <code>.value = newValue</code>.</p></li></ul></li></ul></article><input type="hidden" value="AUI.$"><input type="hidden" value="Clay"></div><nav class="col-md-5 col-md-offset-2 col-xs-12"><div class="affix-top docs-nav"><div ref="readingContainer"></div></div></nav></div></div></div></main></div></div><script src="/js/bundles/fhrFW.js"></script><script>var data = JSON.parse('{\x22pageLocation\x22:\x22index.children.others.children.aui$\x22,\x22site\x22:{\x22title\x22:\x22Clay\x22,\x22subtitle\x22:\x22Portal Migration\x22,\x22index\x22:{\x22title\x22:\x22Keep Calm and Migrate!\x22,\x22description\x22:\x22Learn how to migrate Portal to new Clay components.\x22,\x22srcFilePath\x22:\x22src\/pages\/index.soy\x22,\x22id\x22:\x22pages\x22,\x22url\x22:\x22\/.\/\x22,\x22children\x22:{\x22others\x22:{\x22children\x22:{\x22aui$\x22:{\x22title\x22:\x22AUI.$\x22,\x22description\x22:\x22\x22,\x22layout\x22:\x22othersGuide\x22,\x22weight\x22:1,\x22clayTaglib\x22:\x22document.querySelector\x22,\x22srcFilePath\x22:\x22src\/pages\/others\/aui$.md\x22,\x22id\x22:\x22aui$\x22,\x22url\x22:\x22\/others\/aui$.html\x22,\x22active\x22:true},\x22lodash\x22:{\x22title\x22:\x22Lodash\x22,\x22description\x22:\x22\x22,\x22layout\x22:\x22othersGuide\x22,\x22weight\x22:1,\x22clayTaglib\x22:\x22\x22,\x22srcFilePath\x22:\x22src\/pages\/others\/lodash.md\x22,\x22id\x22:\x22lodash\x22,\x22url\x22:\x22\/others\/lodash.html\x22}},\x22title\x22:\x22Others\x22,\x22description\x22:\x22Everything you need to know to migrate old tabligs to Clay taglibs.\x22,\x22layout\x22:\x22type\x22,\x22icon\x22:\x22code\x22,\x22weight\x22:1,\x22srcFilePath\x22:\x22src\/pages\/others\/index.md\x22,\x22id\x22:\x22others\x22,\x22url\x22:\x22\/others\/\x22,\x22childIds\x22:[\x22aui$\x22,\x22lodash\x22],\x22active\x22:true},\x22styles\x22:{\x22title\x22:\x22Styles\x22,\x22description\x22:\x22Everything you need to know to migrate styles from Lexicon 1.1 to Clay and Bootstrap 4.\x22,\x22layout\x22:\x22type\x22,\x22icon\x22:\x22magic\x22,\x22weight\x22:1,\x22srcFilePath\x22:\x22src\/pages\/styles\/index.md\x22,\x22id\x22:\x22styles\x22,\x22url\x22:\x22\/styles\/\x22,\x22children\x22:{\x22style1\x22:{\x22title\x22:\x22Style Title\x22,\x22description\x22:\x22Lorem ipsum\x22,\x22layout\x22:\x22guide\x22,\x22weight\x22:1,\x22srcFilePath\x22:\x22src\/pages\/styles\/style1.md\x22,\x22id\x22:\x22style1\x22,\x22url\x22:\x22\/styles\/style1.html\x22}},\x22childIds\x22:[\x22style1\x22]},\x22taglibs\x22:{\x22title\x22:\x22Taglibs\x22,\x22description\x22:\x22Everything you need to know to migrate old tabligs to Clay taglibs.\x22,\x22layout\x22:\x22type\x22,\x22icon\x22:\x22code\x22,\x22weight\x22:1,\x22srcFilePath\x22:\x22src\/pages\/taglibs\/index.md\x22,\x22id\x22:\x22taglibs\x22,\x22url\x22:\x22\/taglibs\/\x22,\x22children\x22:{\x22liferay-aui:icon\x22:{\x22title\x22:\x22liferay-aui:icon\x22,\x22description\x22:\x22\x22,\x22layout\x22:\x22taglibGuide\x22,\x22weight\x22:1,\x22clayTaglib\x22:\x22clay:icon\x22,\x22srcFilePath\x22:\x22src\/pages\/taglibs\/liferay-aui:icon.md\x22,\x22id\x22:\x22liferay-aui:icon\x22,\x22url\x22:\x22\/taglibs\/liferay-aui:icon.html\x22},\x22liferay-ui:alert\x22:{\x22title\x22:\x22liferay-ui:alert\x22,\x22description\x22:\x22\x22,\x22layout\x22:\x22taglibGuide\x22,\x22weight\x22:1,\x22clayTaglib\x22:\x22clay:alert\x22,\x22srcFilePath\x22:\x22src\/pages\/taglibs\/liferay-ui:alert.md\x22,\x22id\x22:\x22liferay-ui:alert\x22,\x22url\x22:\x22\/taglibs\/liferay-ui:alert.html\x22},\x22liferay-ui:error\x22:{\x22title\x22:\x22liferay-ui:error\x22,\x22description\x22:\x22\x22,\x22layout\x22:\x22taglibGuide\x22,\x22weight\x22:1,\x22clayTaglib\x22:\x22clay:error\x22,\x22srcFilePath\x22:\x22src\/pages\/taglibs\/liferay-ui:error.md\x22,\x22id\x22:\x22liferay-ui:error\x22,\x22url\x22:\x22\/taglibs\/liferay-ui:error.html\x22},\x22liferay-ui:success\x22:{\x22title\x22:\x22liferay-ui:success\x22,\x22description\x22:\x22\x22,\x22layout\x22:\x22taglibGuide\x22,\x22weight\x22:1,\x22clayTaglib\x22:\x22clay:success\x22,\x22srcFilePath\x22:\x22src\/pages\/taglibs\/liferay-ui:success.md\x22,\x22id\x22:\x22liferay-ui:success\x22,\x22url\x22:\x22\/taglibs\/liferay-ui:success.html\x22}},\x22childIds\x22:[\x22liferay-aui:icon\x22,\x22liferay-ui:alert\x22,\x22liferay-ui:error\x22,\x22liferay-ui:success\x22]}},\x22childIds\x22:[\x22others\x22,\x22styles\x22,\x22taglibs\x22]}}}'); if (window.electricPageComponent) {window.electricPageComponent.dispose();}var getByPath = function(obj, path) {path = path.split('.'); for (var i = 0; i < path.length; i++) {obj = obj[path[i]];}; return obj;}; if (window.pageComponent) {var page = getByPath(data.site, data.pageLocation); if (page) {window.electricPageComponent = pageComponent.default.render(pageComponent.default, {element: '#pageComponent', page: page, site: data.site});}if (window.runCodeMirror) {runCodeMirror();}}</script><!-- endinject --></div><!-- inject:vendor:js --><script>CodeMirror.defaults.lineNumbers = true; CodeMirror.defaults.matchBrackets = true; CodeMirror.defaults.readOnly = true; CodeMirror.defaults.tabindex = -1; CodeMirror.defaults.tabSize = 2; CodeMirror.defaults.theme = 'dracula'; CodeMirror.defaults.viewportMargin = Infinity; var REGEX_LB = /&#123;/g; var REGEX_RB = /&#125;/g; function runCodeMirror() {var code = document.querySelectorAll('.code'); for (var i = 0; i < code.length; i++) {var text = code[i].innerText .replace(REGEX_LB, '{') .replace(REGEX_RB, '}'); var editor = CodeMirror(function(elt) {var preEl = code[i].parentNode; preEl.parentNode.appendChild(elt);}, {mode: code[i].getAttribute('data-mode') || '', value: text});}if (window.ElectricCodeTabs) {new window.ElectricCodeTabs();}}runCodeMirror(); function runGoogleAnalytics(path) {if (typeof ga === 'function') {ga('set', 'page', path); ga('send', 'pageview');}}document.addEventListener('DOMContentLoaded', function() {if (typeof senna !== 'undefined') {var app = senna.dataAttributeHandler.getApp(); app.on('endNavigate', function(event) {runGoogleAnalytics(event.path);});}});</script><!-- endinject --></body></html>