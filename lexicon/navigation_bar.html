<!DOCTYPE html><html lang="en" class="Navigation Bar"><head><meta charset="UTF-8"><meta content="minimum-scale=1.0, width=device-width" name="viewport"><meta name="description" content=""><link rel="icon" type="image/png" href="favicon-32x32.png" sizes="16x16 32x32" /><title>Navigation Bar - Portal Migration</title><!-- inject:css --><link rel="stylesheet" href="/vendor/senna/senna.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/dracula.css"><!-- endinject --><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,900" rel="stylesheet"><script src="/scripts/jquery.min.js"></script><script src="/scripts/popper.js"></script><!-- inject:js --><script src="/js/bundles/shared.electric.js"></script><script src="/vendor/bootstrap.js"></script><script src="/vendor/svg4everybody.js"></script><script src="/vendor/senna/senna.js"></script><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/htmlmixed/htmlmixed.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="/vendor/codemirror/mode/xml/xml.js"></script><script src="/vendor/codemirror/mode/soy/soy.js"></script><!-- endinject --><script>svg4everybody();</script><link id="mainCssLink" rel="stylesheet" href="/styles/main.css"></head><body data-senna><div data-senna-surface id="wrapper"><div class="senna-loading-bar"></div><!-- inject:metal:js --><div id="pageComponent"><div class="docs"><main class="content"><div><div class="navbar navbar-mobile navbar-expand-lg navbar-header"><a class="navbar-brand d-flex" href="/"><span class="title h1 font-weight-bold mb-0 p-1">Portal Migration</span></a><button class="navbar-toggler sidebar-toggler p-3" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><svg aria-hidden="true" class="lexicon-icon lexicon-icon-bars"><use xlink:href="/vendor/lexicon/icons.svg#bars" /></svg></button></div><nav class="sidebar-toggler-content sidenav-fixed sidenav-menu-slider" id="clay-sidebar"><div class="sidebar sidebar-clay-site sidenav-menu d-flex flex-column"><div class="sidebar-header"><div class="navbar navbar-expand-lg navbar-header"><a class="navbar-brand" href="/"><span class="title">Portal </span><small>Migration</small></a></div></div><div class="sidebar-body mb-auto"><div class="sidebar-search"><div class="page-autocomplete"><div class="form-group"><div class="input-group"><input autocomplete="off" class="form-control" name="q" placeholder="Search" ref="input" required type="text" ><span class="input-group-addon"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#search" /></svg></span></div></div></div></div><ul class="nav nav-nested nav-pills nav-stacked"><li class="nav-heading"><a class="align-middle" href="/javascript/"><svg class="clay-icon icon-monospaced mr-2"><use xlink:href="/vendor/lexicon/icons.svg#code" /></svg><span>JavaScript</span><svg class="collapse-toggle clay-icon icon-monospaced" data-onclick="handleCollapseClick_" ><use xlink:href="/vendor/lexicon/icons.svg#caret-bottom" /></svg></a><ul class="nav nav-nested nav-pills nav-stacked"><li class=""><a class="align-middle" href="/javascript/lodash.html"><span>Lodash</span></a></li><li class=""><a class="align-middle" href="/javascript/jQuery.html"><span>jQuery</span></a></li></ul></li><li class="active nav-heading"><a class="align-middle" href="/lexicon/"><svg class="clay-icon icon-monospaced mr-2"><use xlink:href="/vendor/lexicon/icons.svg#code" /></svg><span>Lexicon 2.0</span><svg class="collapse-toggle clay-icon icon-monospaced" data-onclick="handleCollapseClick_" ><use xlink:href="/vendor/lexicon/icons.svg#caret-bottom" /></svg></a><ul class="nav nav-nested nav-pills nav-stacked"><li class="active "><a class="align-middle" href="/lexicon/navigation_bar.html"><span>Navigation Bar</span></a></li></ul></li></ul></div></div></nav></div><div class="sidebar-offset"><header class="text-center"><div class="container-fluid"><h1 class="py-3">Navigation Bar <small>Pattern Migration Guide</small></h1></div></header><div class="clay-site-container container-fluid"><div class="row"><div class="col-12 text-center"><h3>Apply Lexicon's <a href="https://lexicondesign.io/docs/patterns/Navigation/horizontalNav.html">Navigation Bar Pattern</a> using <a href="https://claycss.com/docs/components/navbar.html">Clay</a></h3></div><div class="col-12"><article class="my-5"><h2>How does it look like now (7.0)</h2><p><img class="img img-thumbnail" src="/images/lexiconMigration/navigation_bar_old.png"></p><h2>Changes for Lexicon 2.0 (7.1)</h2><p><img class="img img-thumbnail" src="/images/lexiconMigration/navigation_bar_new.png"></p><table><thead><tr><th>Change</th><th>Reason</th></tr></thead><tbody><tr><td>① The <em>Navigation Bar is dark</em> in admin applications (and light outside of admin contexts)</td><td>The Navigation Bar reflects Application Sections and the color helps make this connection</td></tr><tr><td>② The <em>general search is moved out of the Navigation Bar</em> and into the Management Toolbar</td><td>Search applies to the current Application data set and not the application itself</td></tr></tbody></table><h2>How to apply it?</h2><table><thead><tr><th>_</th><th>Action</th><th>Mandatory</th></tr></thead><tbody><tr><td><a href="#step-1">1</a></td><td>Locate the code in your application</td><td>✔</td></tr><tr><td><a href="#step-2">2</a></td><td>Move the search into the management toolbar</td><td>✔</td></tr><tr><td><a href="#step-3">3</a></td><td>Use <code>clay:navigation-bar</code> instead of the old <code>aui:navbar</code> tag</td><td>✔</td></tr><tr><td><a href="#step-4">4</a></td><td>Extract application sections from the Actions Menu</td><td>✘</td></tr><tr><td><a href="#step-5">5</a></td><td>Move the navigation items definition into a Display Context</td><td>✘</td></tr></tbody></table><h3>[1] Locate the code in your application <a id="step-1"></a></h3><p>Locate the code responsible for rendering the <strong>navigation</strong> in your application. It should resemble something like the following snippet found in <a href="https://github.com/liferay/liferay-portal/blob/master/modules/apps/collaboration/blogs/blogs-web/src/main/resources/META-INF/resources/blogs_admin/view.jsp#L28-L54">blogs-web/blogs-admin/view.jsp</a>:</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text/html" ref="code">&lt;aui:nav-bar cssClass=&quot;collapse-basic-search&quot; markupView=&quot;lexicon&quot;&gt;
    &lt;aui:nav cssClass=&quot;navbar-nav&quot;&gt;
        &lt;portlet:renderURL var=&quot;viewEntriesURL&quot; /&gt;

        &lt;aui:nav-item
            href=&quot;&lt;%= viewEntriesURL %&gt;&quot;
            label=&quot;entries&quot;
            selected=&#39;&lt;%= navigation.equals(&quot;entries&quot;) %&gt;&#39;
        /&gt;
    &lt;/aui:nav&gt;

    &lt;aui:form action=&quot;&lt;%= portletURL.toString() %&gt;&quot; name=&quot;searchFm&quot;&gt;
        &lt;aui:nav-bar-search&gt;
            &lt;liferay-ui:input-search markupView=&quot;lexicon&quot; /&gt;
        &lt;/aui:nav-bar-search&gt;
    &lt;/aui:form&gt;
&lt;/aui:nav-bar&gt;</code></pre></div><p>Locate the code responsible for rendering the <strong>management toolbar</strong> in your application. It should resemble something like the following snippet found in <a href="https://github.com/liferay/liferay-portal/blob/master/modules/apps/collaboration/blogs/blogs-web/src/main/resources/META-INF/resources/blogs_admin/view_entries.jsp#L149-L153">blogs-web/blogs-admin/view_entries.jsp</a>:</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text/html" ref="code">&lt;liferay-frontend:management-bar
    disabled=&quot;&lt;%= entriesSearchContainer.getTotal() &lt;= 0 %&gt;&quot;
    includeCheckBox=&quot;&lt;%= true %&gt;&quot;
    searchContainerId=&quot;blogEntries&quot;
&gt;
    ...
&lt;/liferay-frontend:management-bar&gt;</code></pre></div><h3>[2] Move the search into the management toolbar <a id="step-2"></a></h3><p>Move the part in charge of the search into the <code>liferay-frontend:management-bar</code> section, right after the last of the <code>liferay-frontend-management-bar-filters</code> item like it's shown in the following snippet. Notice how the usage of <code>aui:nav-bar-search</code> from the original snippet is no longer necessary, but an additional <code>&lt;li&gt;</code> item needs to be added.</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text/html" ref="code">&lt;liferay-frontend:management-bar-filters&gt;
    ...

    &lt;li&gt;
        &lt;aui:form action=&quot;&lt;%= portletURL.toString() %&gt;&quot; name=&quot;searchFm&quot;&gt;
            &lt;liferay-ui:input-search markupView=&quot;lexicon&quot; /&gt;
        &lt;/aui:form&gt;
    &lt;/li&gt;
&lt;/liferay-frontend:management-bar-filters&gt;</code></pre></div><h3>[3] Use <code>clay:navigation-bar</code> instead of the old <code>aui:navbar</code> tag <a id="step-3"></a></h3><p>Start by adding the following imports to the imports section of your <code>init.jsp</code> file:</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text/html" ref="code">// Import the clay tld file to be able to use the new tag
&lt;%@ taglib uri=&quot;http://liferay.com/tld/clay&quot; prefix=&quot;clay&quot; %&gt;

// Import the NavigationItem utility class to create the items model
&lt;%@ page import=&quot;com.liferay.frontend.taglib.clay.servlet.taglib.util.NavigationItem&quot; %&gt;</code></pre></div><p>Model your entries using the <code>NavigationItem</code> class and pass it down to the tag instance.</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text/html" ref="code">&lt;%
List&lt;NavigationItem&gt; navigationItems = new ArrayList&lt;&gt;();

NavigationItem entriesNavigationItem = new NavigationItem();

entriesNavigationItem.setActive(navigation.equals(&quot;entries&quot;));
entriesNavigationItem.setHref(viewEntriesURL);
entriesNavigationItem.setLabel(&quot;Entries&quot;);

navigationItems.add(entriesNavigationItem);
%&gt;

&lt;clay:navigation-bar
    inverted=&quot;&lt;%= true %&gt;&quot;
    items=&quot;&lt;%= navigationItems %&gt;&quot; /&gt;</code></pre></div><div class="alert alert-warning">The `inverted` attribute is set to true in all admin portlets. Instances in applications for live  sites only can be left to false (default)</div><h3>[4] Extract application sections from the Actions Menu <a id="step-4"></a></h3><div class="alert alert-info">This step is <em>optional</em> but <strong>recommended</strong></div><p>All Application Sections should be clearly visible in the Navigation Bar. Consider exploring what options your application currently has in the Actions Menu (find instances of <code>*PortletConfigurationIcon</code>) to find section candidates.</p><p><img class="img img-thumbnail" src="/images/lexiconMigration/navigation_bar_application_sections.png"></p><h3>[5] Move the navigation items definition into a Display Context <a id="step-5"></a></h3><div class="alert alert-info">This step is <em>optional</em> but <strong>recommended</strong></div><p>If your application already supports it (or even if it doesn't), consider moving the <code>Java</code> portion that generates the navigation items model into a <code>*DisplayContext</code> pattern to keep your jsps cleaner and server-free</p><div class="code-container"><button class="btn btn-sm btn-copy"><svg class="lexicon-icon"><use xlink:href="/vendor/lexicon/icons.svg#paste" /></svg></button><pre><code class="code" data-mode="text/html" ref="code">&lt;clay:navigation-bar
    inverted=&quot;&lt;%= true %&gt;&quot;
    items=&quot;&lt;%= myAppAdminViewDisplayContext.getNavigationItems() %&gt;&quot; /&gt;</code></pre></div><h2>Who has done it already?</h2><table><thead><tr><th>LPS</th><th>Pull Request</th><th>Master</th></tr></thead><tbody></tbody></table></article><input type="hidden" value="Navigation Bar"><input type="hidden" value="Portal Migration"></div></div></div></div></main></div></div><script src="/js/bundles/lAHBm.js"></script><script>var data = JSON.parse('{\x22pageLocation\x22:\x22index.children.lexicon.children.navigation_bar\x22,\x22site\x22:{\x22title\x22:\x22Portal Migration\x22,\x22subtitle\x22:\x22Learn how to migrate Portal to new Clay components, Bootstrap 4 and much more\x22,\x22index\x22:{\x22title\x22:\x22Home\x22,\x22description\x22:\x22Learn how to migrate Portal to new Clay components.\x22,\x22srcFilePath\x22:\x22src\/pages\/index.soy\x22,\x22id\x22:\x22pages\x22,\x22location\x22:\x22\/.\/\x22,\x22url\x22:\x22\/.\/\x22,\x22children\x22:{\x22javascript\x22:{\x22title\x22:\x22JavaScript\x22,\x22description\x22:\x22Everything you need to know to migrate old tabligs to Clay taglibs.\x22,\x22layout\x22:\x22type\x22,\x22icon\x22:\x22code\x22,\x22weight\x22:1,\x22srcFilePath\x22:\x22src\/pages\/javascript\/index.md\x22,\x22id\x22:\x22javascript\x22,\x22location\x22:\x22\/javascript\/\x22,\x22url\x22:\x22\/javascript\/\x22,\x22children\x22:{\x22jQuery\x22:{\x22title\x22:\x22jQuery\x22,\x22description\x22:\x22\x22,\x22layout\x22:\x22othersGuide\x22,\x22weight\x22:1,\x22clayTaglib\x22:\x22Vanilla or Metal.js\x22,\x22srcFilePath\x22:\x22src\/pages\/javascript\/jQuery.md\x22,\x22id\x22:\x22jQuery\x22,\x22location\x22:\x22\/javascript\/jQuery.html\x22,\x22url\x22:\x22\/javascript\/jQuery.html\x22},\x22lodash\x22:{\x22title\x22:\x22Lodash\x22,\x22description\x22:\x22\x22,\x22layout\x22:\x22othersGuide\x22,\x22weight\x22:1,\x22clayTaglib\x22:\x22Vanilla or Metal.js\x22,\x22srcFilePath\x22:\x22src\/pages\/javascript\/lodash.md\x22,\x22id\x22:\x22lodash\x22,\x22location\x22:\x22\/javascript\/lodash.html\x22,\x22url\x22:\x22\/javascript\/lodash.html\x22}},\x22childIds\x22:[\x22lodash\x22,\x22jQuery\x22]},\x22lexicon\x22:{\x22title\x22:\x22Lexicon 2.0\x22,\x22description\x22:\x22Everything you need to know to migrate old tabligs to Clay taglibs.\x22,\x22layout\x22:\x22type\x22,\x22icon\x22:\x22code\x22,\x22weight\x22:1,\x22srcFilePath\x22:\x22src\/pages\/lexicon\/index.md\x22,\x22id\x22:\x22lexicon\x22,\x22location\x22:\x22\/lexicon\/\x22,\x22url\x22:\x22\/lexicon\/\x22,\x22children\x22:{\x22navigation_bar\x22:{\x22title\x22:\x22Navigation Bar\x22,\x22description\x22:\x22\x22,\x22layout\x22:\x22lexiconMigration\x22,\x22weight\x22:1,\x22clayComponentLink\x22:\x22https:\/\/claycss.com\/docs\/components\/navbar.html\x22,\x22lexiconPattern\x22:\x22Navigation Bar\x22,\x22lexiconPatternLink\x22:\x22https:\/\/lexicondesign.io\/docs\/patterns\/Navigation\/horizontalNav.html\x22,\x22srcFilePath\x22:\x22src\/pages\/lexicon\/navigation_bar.md\x22,\x22id\x22:\x22navigation_bar\x22,\x22location\x22:\x22\/lexicon\/navigation_bar.html\x22,\x22url\x22:\x22\/lexicon\/navigation_bar.html\x22,\x22active\x22:true}},\x22childIds\x22:[\x22navigation_bar\x22],\x22active\x22:true}},\x22childIds\x22:[\x22javascript\x22,\x22lexicon\x22]},\x22topbar\x22:[{\x22href\x22:\x22\/javascript\/\x22,\x22label\x22:\x22JavaScript\x22},{\x22href\x22:\x22\/lexicon\/\x22,\x22label\x22:\x22Lexicon 2.0\x22,\x22selected\x22:true}]}}'); if (window.electricPageComponent) {window.electricPageComponent.dispose();}var getByPath = function(obj, path) {path = path.split('.'); for (var i = 0; i < path.length; i++) {obj = obj[path[i]];}; return obj;}; if (window.pageComponent) {var page = getByPath(data.site, data.pageLocation); if (page) {window.electricPageComponent = pageComponent.default.render(pageComponent.default, {element: '#pageComponent > *', page: page, site: data.site});}if (window.runCodeMirror) {runCodeMirror();}}</script><!-- endinject --></div><!-- inject:vendor:js --><script>CodeMirror.defaults.lineNumbers = true; CodeMirror.defaults.matchBrackets = true; CodeMirror.defaults.readOnly = true; CodeMirror.defaults.tabindex = -1; CodeMirror.defaults.tabSize = 2; CodeMirror.defaults.theme = 'dracula'; CodeMirror.defaults.viewportMargin = Infinity; var REGEX_LB = /&#123;/g; var REGEX_RB = /&#125;/g; function runCodeMirror() {var code = document.querySelectorAll('.code'); for (var i = 0; i < code.length; i++) {var text = code[i].innerText .replace(REGEX_LB, '{') .replace(REGEX_RB, '}'); var editor = CodeMirror(function(elt) {var preEl = code[i].parentNode; preEl.parentNode.appendChild(elt);}, {mode: code[i].getAttribute('data-mode') || '', value: text});}if (window.ElectricCodeTabs) {new window.ElectricCodeTabs();}}runCodeMirror(); function runGoogleAnalytics(path) {if (typeof ga === 'function') {ga('set', 'page', path); ga('send', 'pageview');}}document.addEventListener('DOMContentLoaded', function() {if (typeof senna !== 'undefined') {var app = senna.dataAttributeHandler.getApp(); app.on('endNavigate', function(event) {runGoogleAnalytics(event.path);});}});</script><!-- endinject --></body></html>